{"version":3,"sources":["data.ts","pages/critterpedia/index.ts","pages/turnips/index.ts","serviceWorkerRegistration.ts","common_theme_data.ts","dark.ts","light.ts","themes.ts","App.tsx","i18n.ts","index.tsx","misc.ts","components/WithTooltip.tsx","components/UpdateReadyIcon.tsx","components/WorksOfflineIcon.tsx","components/AppBar.tsx","components/InfoDialogue.tsx","components/LanguageDialogue.tsx","components/AppFrame.tsx","components/Centred.tsx","components/DrawerAdjust.tsx","components/ListItemLink.tsx","components/Loading.tsx","components/NavigationDrawer.tsx","components/UpdateReadyDialogue.tsx","components/WorksOfflineDialogue.tsx","context.ts","prototype_mods.ts","pages/turnips/data.ts"],"names":["VERSION","_upgrade0","window","localStorage","settings","JSON","stringify","theme","hemisphere","islandName","playerName","timeOffset","useSystemTime","useTwelveHourTime","critterpedia","data","bugs","fish","i","push","obtained","modelled","turnips","buy","mon","am","pm","tue","wed","thu","fri","sat","previousPattern","Pattern","UNKNOWN","firstBuy","dataVersion","_upgrade1","PreNumber","ND_0_1_0","Versions","lazy","isLocalhost","Boolean","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","headers","then","response","contentType","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","commonProps","MuiTextField","variant","MuiSelect","MuiFormControl","MuiDialogTitle","style","textAlign","createMuiTheme","palette","type","opacity","elevations","0","main","1","2","3","4","6","8","12","16","24","transparent","winter","contrastText","spring","summer","autumn","primary","secondary","background","paper","default","text","hint","disabled","zIndex","appBar","props","overrides","MuiAppBar","colorPrimary","backgroundColor","color","colorSecondary","colorDefault","MuiDrawer","width","MuiCard","root","borderWidth","borderColor","borderStyle","MuiCardHeader","paddingBottom","MuiListItemIcon","dark","name","light","themes","App","undefined","upgrade","updateData","foundSettings","parse","React","useState","setSettingsImpl","setSettings","value","useMemo","getTheme","updateReady","setUpdateReadyImpl","worksOffline","setWorksOfflineImpl","updateReadyDialogueOpen","setUpdateReadyDialogueOpen","worksOfflineDialogueOpen","setWorksOfflineDialogueOpen","setUpdateReady","setWorksOffline","serviceWorkerRegistration","_","ThemeProvider","CssBaseline","setTheme","document","body","classList","add","setTimeout","remove","fallback","path","render","params","index","valueOr","to","load","exact","Button","onClick","open","setOpen","i18n","use","Backend","LanguageDetector","initReactI18next","init","backend","loadPath","fallbackLng","debug","interpolation","escapeValue","supportedLngs","ns","defaultNS","ReactDOM","basename","getElementById","_getTextWidthDiv","zip","getTextWidth","div","createElement","position","top","left","appendChild","innerText","clientWidth","getDefault","defaultValue","rv","isNaN","range","start","stop","step","Array","from","keys","Math","ceil","fill","map","x","y","all","values","reduce","res","valid","clone","obj","arrays","length","arr","minLength","nextArr","len","min","Infinity","WithTooltip","tooltip","children","title","UpdateReadyIcon","t","useTranslation","useTheme","GetApp","success","WorksOfflineIcon","OfflinePin","AppBar","Toolbar","IconButton","edge","aria-label","marginRight","setDrawerOpen","drawerOpen","flexGrow","gitInfo","ContribInfo","avatarUrl","ListItem","padding","button","component","target","ListItemAvatar","Avatar","alt","src","ListItemText","toLowerCase","InfoDialogue","Dialog","onClose","DialogTitle","DialogContent","Trans","i18nKey","commit","hash","textUnderlineOffset","gitRevision","shortHash","Typography","List","DialogActions","LanguageDialogue","aria-labelledby","PaperProps","id","setLang","pageData","icon","EmojiNature","initialRenders","AppFrame","startOpen","useMediaQuery","breakpoints","up","langOpen","setLangOpen","infoOpen","setInfoOpen","newTheme","display","Object","entries","route","ListItemLink","ListItemIcon","Info","Language","changeLanguage","DrawerAdjust","active","Centred","className","matches","paddingLeft","transition","renderLink","forwardRef","itemProps","ref","activeClassName","Loading","autoPlay","loop","muted","playsInline","NavigationDrawer","container","Hidden","smUp","Drawer","anchor","direction","xsDown","UpdateReadyDialogue","WorksOfflineDialogue","interval","defaultSettings","time","Date","NDContext","createContext","NDContextProvider","updateTime","setState","defaultProps","setInterval","this","clearInterval","Provider","PureComponent","useNDContext","useContext","String","prototype","capitalise","charAt","toUpperCase","slice","rotated","by","concat","rotate","apply","splice","calculateFluctuatingHigh","calculateFluctuatingDec","calculateOneFluctuating","makeRange","max","base","avg","rangeValid","CHANCE_FLUCTUATING","FLUCTUATING","LARGE_SPIKE","DECREASING","SMALL_SPIKE","AGGREGATE","offset","prices","price","lowestRate","highestRate","ranges","minRates","maxRates","recalculate","minRate","maxRate","categoryChance","chance","hi1","hi23","phase1","_dec1","dec2","dec1","phase2","hi3","phase3","phase4","phase5","pattern","hours","f","flattenData","minPossibleData","maxPossibleData","dataMakesSense","user","calculate","chanceFluctuating","flatData","flat","calculateFluctuating","emptyWeek","patternColours","Error"],"mappings":"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","file":"static/js/main.f61531e6.chunk.js","sourcesContent":["import { Pattern } from './pages/turnips/data';\nimport { ThemeName } from './themes';\nexport const VERSION = '0.1.0';\n\nfunction _upgrade0() {\n    if (!window.localStorage.settings) {\n        window.localStorage.settings = JSON.stringify({\n            theme: 'dark',\n            hemisphere: 'north',\n            islandName: 'ISLAND',\n            playerName: 'PLAYER',\n            timeOffset: 0,\n            useSystemTime: true,\n            useTwelveHourTime: false,\n        });\n    }\n    if (!window.localStorage.critterpedia) {\n        let data: UserCritterpediaData = {\n            bugs: [],\n            fish: [],\n        };\n        for (let i = 0; i < 80; i++) {\n            data.bugs.push({ obtained: false, modelled: false });\n            data.fish.push({ obtained: false, modelled: false });\n        }\n        window.localStorage.critterpedia = JSON.stringify(data);\n    }\n    if (!window.localStorage.turnips) {\n        window.localStorage.turnips = JSON.stringify({\n            buy: null,\n            mon: { am: null, pm: null },\n            tue: { am: null, pm: null },\n            wed: { am: null, pm: null },\n            thu: { am: null, pm: null },\n            fri: { am: null, pm: null },\n            sat: { am: null, pm: null },\n            previousPattern: Pattern.UNKNOWN,\n            firstBuy: false,\n        });\n    }\n    window.localStorage.dataVersion = VERSION;\n    _upgrade1();\n}\nfunction _upgrade1() {\n    // latest version at time of writing\n}\n\nnamespace Versions {\n    export namespace PreNumber {\n        export interface UserHourData {\n            am: number | null;\n            pm: number | null;\n        }\n\n        export interface UserTurnipsData {\n            buy: number | null;\n            mon: UserHourData;\n            tue: UserHourData;\n            wed: UserHourData;\n            thu: UserHourData;\n            fri: UserHourData;\n            sat: UserHourData;\n            previousPattern: Pattern;\n            firstBuy: boolean;\n        }\n\n        export interface UserCritterData {\n            obtained: boolean;\n            modelled: boolean;\n        }\n\n        export interface UserCritterpediaData {\n            bugs: UserCritterData[];\n            fish: UserCritterData[];\n        }\n\n        export interface UserSettings {\n            theme: ThemeName;\n            hemisphere: \"north\" | \"south\";\n            playerName: string;\n            islandName: string;\n            timeOffset: number;\n            useSystemTime: boolean;\n            useTwelveHourTime: boolean;\n        }\n\n        export const upgrade = _upgrade0;\n    }\n    export namespace ND_0_1_0 {\n        export interface UserHourData {\n            am: number | null;\n            pm: number | null;\n        }\n\n        export interface UserTurnipsData {\n            buy: number | null;\n            mon: UserHourData;\n            tue: UserHourData;\n            wed: UserHourData;\n            thu: UserHourData;\n            fri: UserHourData;\n            sat: UserHourData;\n            previousPattern: Pattern;\n            firstBuy: boolean;\n        }\n\n        export interface UserCritterData {\n            obtained: boolean;\n            modelled: boolean;\n        }\n\n        export interface UserCritterpediaData {\n            bugs: UserCritterData[];\n            fish: UserCritterData[];\n        }\n\n        export interface UserSettings {\n            theme: ThemeName;\n            hemisphere: \"north\" | \"south\";\n            playerName: string;\n            islandName: string;\n            timeOffset: number;\n            useSystemTime: boolean;\n            useTwelveHourTime: boolean;\n        }\n\n        export const upgrade = _upgrade1;\n    }\n}\nexport type UserHourData = Versions.ND_0_1_0.UserHourData;\nexport type UserTurnipsData = Versions.ND_0_1_0.UserTurnipsData;\nexport type UserCritterData = Versions.ND_0_1_0.UserCritterData;\nexport type UserCritterpediaData = Versions.ND_0_1_0.UserCritterpediaData;\nexport type UserSettings = Versions.ND_0_1_0.UserSettings;\nexport function updateData() {\n    if (window.localStorage.dataVersion === VERSION) {\n        return;\n    }\n    switch (window.localStorage.dataVersion) {\n        case undefined:\n            Versions.PreNumber.upgrade();\n            break;\n        default:\n            console.log(\"Please do not mess with your data!\");\n    }\n};\n","import { lazy } from 'react';\nexport default lazy(() => import('./page'));","import { lazy } from 'react';\nexport default lazy(() => import('./page'));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://cra.link/PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://cra.link/PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}","import { ComponentsProps } from \"@material-ui/core/styles/props\";\n\nconst commonProps: ComponentsProps = {\n    MuiTextField: {\n        variant: 'filled',\n    },\n    MuiSelect: {\n        variant: 'filled',\n    },\n    MuiFormControl: {\n        variant: 'filled',\n    },\n    MuiDialogTitle: {\n        style: { textAlign: 'center' },\n    }\n};\nexport { commonProps };\n","import { createMuiTheme } from '@material-ui/core/styles';\nimport { commonProps } from './common_theme_data';\nimport './prototype_mods';\n\n\n// Dark theme\nconst theme = createMuiTheme({\n    palette: {\n        type: 'dark',\n        opacity: 0.3,\n        elevations: {\n            0: { main: '#1e1e1e' },\n            1: { main: '#292929' },\n            2: { main: '#2e2e2e' },\n            3: { main: '#303030' },\n            4: { main: '#323232' },\n            6: { main: '#373737' },\n            8: { main: '#393939' },\n            12: { main: '#3e3e3e' },\n            16: { main: '#404040' },\n            24: { main: '#424242' },\n        },\n        modelled: {\n            main: 'gold',\n            transparent: 'rgba(255, 215, 0, 0.3)',\n        },\n        winter: {\n            main: '#3c84c6',\n            transparent: 'rgba(60, 132, 198, 0.3)',\n            contrastText: 'rgba(0,0,0,87%)'\n        },\n        spring: {\n            main: '#38761c',\n            transparent: 'rgba(56, 118, 28, 0.3)',\n            contrastText: 'rgba(0,0,0,87%)'\n        },\n        summer: {\n            main: '#e69038',\n            transparent: 'rgba(230, 144, 56, 0.3)',\n            contrastText: 'rgba(0,0,0,87%)'\n        },\n        autumn: {\n            main: '#b45f04',\n            transparent: 'rgba(180, 95, 4, 0.3)',\n            contrastText: 'rgba(0,0,0,87%)'\n        },\n        primary: {\n            main: '#bb86fc',\n            contrastText: 'rgba(0,0,0,87%)',\n            transparent: 'rgba(187, 134, 252, 0.3)',\n        },\n        secondary: {\n            main: '#03dac6',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        error: {\n            main: '#cf6679',\n            transparent: 'rgba(207, 102, 121, 0.3)',\n        },\n        background: {\n            paper: '#1e1e1e',\n            default: '#121212'\n        },\n        text: {\n            primary: 'rgba(255,255,255,87%)',\n            secondary: 'rgba(255,255,255,60%)',\n            hint: 'rgba(255,255,255,60%)',\n            disabled: 'rgba(255,255,255,38%)',\n        }\n    },\n    zIndex: {\n        appBar: 1250\n    },\n    props: commonProps,\n});\n\ntheme.overrides = {\n    MuiAppBar: {\n        colorPrimary: {\n            backgroundColor: theme.palette.background.paper,\n            color: theme.palette.primary.main,\n        },\n        colorSecondary: {\n            backgroundColor: theme.palette.background.paper,\n            color: theme.palette.secondary.main,\n        },\n        colorDefault: {\n            backgroundColor: theme.palette.background.paper,\n            color: theme.palette.text.primary,\n        }\n    },\n    MuiDrawer: {\n        paper: {\n            width: 240\n        }\n    },\n    MuiCard: {\n        root: {\n            borderWidth: 1,\n            borderColor: 'rgba(255, 255, 255, 8%)',\n            borderStyle: 'solid',\n        },\n    },\n    MuiCardHeader: {\n        root: {\n            paddingBottom: 0,\n            textAlign: 'center',\n        },\n    },\n    MuiListItemIcon: {\n        root: {\n            color: theme.palette.text.secondary,\n        }\n    }\n};\n\nexport default theme;","import { createMuiTheme } from '@material-ui/core/styles';\nimport { commonProps } from './common_theme_data';\nimport './prototype_mods';\n\n// Normal or default theme\nconst theme = createMuiTheme({\n    palette: {\n        type: 'light',\n        opacity: 0.6,\n        elevations: {\n            0: { main: '#ffffff' },\n            1: { main: '#ffffff' },\n            2: { main: '#ffffff' },\n            3: { main: '#ffffff' },\n            4: { main: '#ffffff' },\n            6: { main: '#ffffff' },\n            8: { main: '#ffffff' },\n            12: { main: '#ffffff' },\n            16: { main: '#ffffff' },\n            24: { main: '#ffffff' },\n        },\n        modelled: {\n            main: '#fbc02d',\n            transparent: 'rgba(251, 192, 45, 0.5)',\n        },\n        winter: {\n            main: '#3c84c6',\n            transparent: 'rgba(60, 132, 198, 0.6)',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        spring: {\n            main: '#38761c',\n            transparent: 'rgba(56, 118, 28, 0.6)',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        summer: {\n            main: '#e69038',\n            transparent: 'rgba(230, 144, 56, 0.6)',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        autumn: {\n            main: '#b45f04',\n            transparent: 'rgba(180, 95, 4, 0.6)',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        primary: {\n            main: '#6200ee',\n            contrastText: 'rgba(255,255,255,87%)',\n            transparent: 'rgba(98, 0, 238, 0.5)',\n        },\n        secondary: {\n            main: '#03dac6',\n            contrastText: 'rgba(0,0,0,87%)',\n        },\n        error: {\n            main: '#b00020',\n            transparent: 'rgba(176, 0, 32, 0.5)',\n        },\n        background: {\n            paper: '#ffffff',\n            default: '#eeeeee'\n        },\n        text: {\n            primary: 'rgba(0,0,0,87%)',\n            secondary: 'rgba(0,0,0,60%)',\n            hint: 'rgba(0,0,0,60%)',\n            disabled: 'rgba(0,0,0,38%)',\n        }\n    },\n    zIndex: {\n        appBar: 1250\n    },\n    props: commonProps,\n});\n\ntheme.overrides = {\n    MuiDrawer: {\n        paper: {\n            width: 240\n        }\n    },\n    MuiCard: {\n        root: {\n            borderWidth: 1,\n            borderColor: 'transparent',\n            borderStyle: 'solid',\n        },\n    },\n    MuiCardHeader: {\n        root: {\n            paddingBottom: 0,\n            textAlign: 'center',\n        },\n    },\n};\n\nexport default theme;","import dark from './dark';\nimport light from './light';\n\ndark.name = 'dark';\nlight.name = 'light';\n\nconst themes = {\n    light,\n    dark,\n}\n\nexport type ThemeName = keyof typeof themes;\n\nexport default function getTheme(theme: ThemeName) {\n    return themes[theme];\n}","import { Button, CssBaseline, ThemeProvider } from '@material-ui/core';\nimport React, { Suspense } from 'react';\nimport { Route, Switch } from 'react-router';\nimport { Redirect } from 'react-router-dom';\nimport { AppFrame, Loading, UpdateReadyDialogue, WorksOfflineDialogue } from './components';\nimport { NDContextProvider } from './context';\nimport { updateData } from './data';\nimport { valueOr } from './misc';\nimport { Critterpedia, Turnips } from './pages';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport getTheme from './themes';\nimport UserSettings from './user_settings';\n\nexport function App() {\n    updateData();\n    const foundSettings: UserSettings = JSON.parse(window.localStorage.settings);\n    const [settings, setSettingsImpl] = React.useState(foundSettings);\n    function setSettings(value: UserSettings) {\n        window.localStorage.settings = JSON.stringify(value);\n        setSettingsImpl(value);\n    }\n    function setTheme(value: 'dark' | 'light') {\n        document.body.classList.add(\"no-transition\");\n        setSettings({ ...settings, theme: value });\n        // document.body.classList.remove(\"no-transition\");\n        setTimeout(() => document.body.classList.remove(\"no-transition\"), 10);\n    }\n    function setPlayerName(value: string) {\n        setSettings({ ...settings, playerName: value });\n    }\n    function setIslandName(value: string) {\n        setSettings({ ...settings, islandName: value });\n    }\n    function setHemisphere(value: 'north' | 'south') {\n        setSettings({ ...settings, hemisphere: value });\n    }\n    function setTimeOffset(value: number) {\n        setSettings({ ...settings, timeOffset: value });\n    }\n    function setUseSystemTime(value: boolean) {\n        setSettings({ ...settings, useSystemTime: value });\n    }\n    function setUseTwelveHourTime(value: boolean) {\n        setSettings({ ...settings, useTwelveHourTime: value });\n    }\n    const theme = React.useMemo(\n        () => getTheme(settings.theme),\n        [settings]\n    );\n    const [updateReady, setUpdateReadyImpl] = React.useState(false);\n    const [worksOffline, setWorksOfflineImpl] = React.useState(false);\n    const [updateReadyDialogueOpen, setUpdateReadyDialogueOpen] = React.useState(false);\n    const [worksOfflineDialogueOpen, setWorksOfflineDialogueOpen] = React.useState(false);\n    function setUpdateReady(value: boolean) {\n        console.log('setUpdateReady:', value);\n        setUpdateReadyImpl(value);\n        setUpdateReadyDialogueOpen(value);\n    }\n    function setWorksOffline(value: boolean) {\n        console.log('setWorksOffline:', value);\n        setWorksOfflineImpl(value);\n        setWorksOfflineDialogueOpen(value);\n    }\n    serviceWorkerRegistration.register({ onUpdate: _ => setUpdateReady(true), onSuccess: _ => setWorksOffline(true) });\n    return <ThemeProvider theme={theme}>\n        <NDContextProvider settings={settings}>\n            <CssBaseline />\n            <AppFrame setTheme={setTheme} updateReady={updateReady} worksOffline={worksOffline}>\n                <Suspense fallback={<Loading />}>\n                    <Switch>\n                        <Route path=\"/critterpedia/:type/:index\" render={({ match }) => {\n                            let type = match.params.type;\n                            let index = valueOr(match.params.index, -1);\n                            if (!(type === 'bug' || type === 'fish') || index < 0 || index > 79) {\n                                return <Redirect to=\"/critterpedia\" />;\n                            }\n                            return <Critterpedia load={{ type, index }} />;\n                        }}>\n                        </Route>\n                        <Route path=\"/critterpedia\" exact>\n                            <Critterpedia />\n                        </Route>\n                        <Route path=\"/critterpedia\">\n                            <Redirect to=\"/critterpedia\" />\n                        </Route>\n                        <Route path=\"/turnips\">\n                            <Turnips />\n                        </Route>\n                        <Route path=\"/loading\">\n                            <Loading />\n                        </Route>\n                        <Route path=\"/test\">\n                            <Button onClick={() => setUpdateReady(true)}>\n                                Toggle <code>updateReady</code> (currently <code>{'' + updateReady}</code>)\n                            </Button>\n                            <Button onClick={() => setWorksOffline(!worksOffline)}>\n                                Toggle <code>worksOffline</code> (currently <code>{'' + worksOffline}</code>)\n                            </Button>\n                        </Route>\n                    </Switch>\n                </Suspense>\n            </AppFrame>\n            <WorksOfflineDialogue open={worksOfflineDialogueOpen} setOpen={setWorksOfflineDialogueOpen} />\n            <UpdateReadyDialogue open={updateReadyDialogueOpen} setOpen={setUpdateReadyDialogueOpen} />\n        </NDContextProvider>\n    </ThemeProvider>;\n}\n","\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport Backend from 'i18next-http-backend';\nimport { initReactI18next } from 'react-i18next';\n\ni18n.use(Backend)\n    .use(LanguageDetector)\n    .use(initReactI18next)\n    .init({\n        backend: { loadPath: '/nookdata_v2/assets/i18n/{{lng}}/{{ns}}.json' },\n        fallbackLng: 'en',\n        debug: process.env.NODE_ENV == 'development',\n\n        interpolation: {\n            escapeValue: false, // not needed for react as it escapes by default\n        },\n        supportedLngs: [\n            'en',\n            'fr',\n        ],\n        ns: 'core',\n        defaultNS: 'core',\n    });","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { App } from './App';\nimport { Loading } from './components';\nimport './i18n';\nimport './index.scss';\nimport { root } from './misc';\n\nif (process.env.NODE_ENV !== 'production') {\n    const { whyDidYouUpdate } = require('why-did-you-update');\n    // whyDidYouUpdate(React);\n}\n\nReactDOM.render(\n    <Suspense fallback={<Loading />}>\n        <BrowserRouter basename={root}>\n            <App />\n        </BrowserRouter>\n    </Suspense>,\n    document.getElementById('root')\n);\nexport { };\n","export type Dict<V> = {\n    [key: string]: V;\n}\nvar _getTextWidthDiv: HTMLDivElement;\nfunction setUpDiv() {\n    _getTextWidthDiv = document.createElement(\"div\");\n    _getTextWidthDiv.style.position = 'absolute';\n    _getTextWidthDiv.style.top = '-9999px';\n    _getTextWidthDiv.style.left = '-9999px';\n    // _getTextWidthDiv.ariaHidden = true;\n    document.body.appendChild(_getTextWidthDiv);\n    return _getTextWidthDiv;\n}\nexport function getTextWidth(text: string) {\n    var div = _getTextWidthDiv ?? (setUpDiv());\n    div.innerText = text\n    return div.clientWidth;\n}\n\nexport const root = '/nookdata_v2';\nexport function getDefault<T>(data: string | undefined, defaultValue: T) {\n    if (data !== undefined) {\n        return JSON.parse(data) as T;  // todo: figure out how to type-check this\n    } else {\n        return defaultValue;\n    }\n}\nexport function valueOr(data: String | undefined, defaultValue: number) {\n    let rv = data ? +data : defaultValue;\n    if (!isNaN(rv)) {\n        return rv;\n    } else {\n        return defaultValue;\n    }\n}\nexport function booleanOr(data: String | undefined, defaultValue: boolean) {\n    switch (data) {\n        case 'true':\n            return true;\n        case 'false':\n            return false;\n        default:\n            return defaultValue;\n    }\n}\n\nexport function range(start: number, stop: number | undefined = undefined, step: number = 1): Array<number> {\n    if (stop === undefined) {\n        stop = start;\n        start = 0;\n        if (step == 1) {  // benefit from optimisation where I don't use two-arg range\n            return Array.from(Array(stop).keys());\n        }\n    }\n    return Array(\n        Math.ceil((stop! - start) / step)\n    ).fill(start).map((x, y) => x + y * step);\n}\n\nexport function all(values: boolean[]) {\n    return values.reduce((res, valid) => (res && valid), true);\n}\nexport function any(values: boolean[]) {\n    return values.reduce((res, valid) => (res || valid), false);\n}\n\nexport type DeepPartial<T> = {\n    [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\nexport function clone<T>(obj: T): T {\n    return JSON.parse(JSON.stringify(obj));\n}\nexport type Tuple<T extends unknown[]> = [...T];\nexport type SoA<T extends unknown[]> = { [I in keyof T]: T[I][] };\nexport function* zip<T extends unknown[]>(...arrays: SoA<T>) {\n    if (arrays.length < 1) {\n        return;\n    }\n    for (let i = 0; i < arrays.reduce((minLength, nextArr) => {\n        let len = nextArr.length;\n        return Math.min(minLength, len);\n    }, Infinity); i++) {\n        yield arrays.map((arr) => arr[i]) as Tuple<T>;\n    }\n}\n\nexport type Filter<T, V> = {\n    [P in keyof T]: T[P] extends V ? never : T[P];\n}\n","interface WithTooltipProps {\n    tooltip: string;\n    children: React.ReactNode;\n}\nexport default function WithTooltip({ tooltip, children }: WithTooltipProps) {\n    return <div title={tooltip}>{children}</div>\n}","import { useTheme } from \"@material-ui/core\";\nimport { GetApp } from \"@material-ui/icons\";\nimport { useTranslation } from \"react-i18next\";\nimport WithTooltip from \"./WithTooltip\";\n\nexport default function UpdateReadyIcon() {\n    const { t } = useTranslation('service');\n    const theme = useTheme();\n    return <WithTooltip tooltip={t('service:available_update.title')}>\n        <GetApp style={{ color: theme.palette.success.main }} />\n    </WithTooltip>;\n}","import { OfflinePin } from \"@material-ui/icons\";\nimport { useTranslation } from \"react-i18next\";\nimport WithTooltip from \"./WithTooltip\";\n\nexport default function WorksOfflineIcon() {\n    const { t } = useTranslation('service');\n    return <WithTooltip tooltip={t('service:available_update.title')}>\n        <OfflinePin />\n    </WithTooltip>;\n}","import { AppBar as TopAppBar, IconButton, Toolbar } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport UpdateReadyIcon from './UpdateReadyIcon';\nimport WorksOfflineIcon from './WorksOfflineIcon';\n\n\ninterface AppBarProps {\n    setDrawerOpen: (value: boolean) => void;\n    drawerOpen: boolean;\n    title: React.ReactNode;\n    updateReady: boolean;\n    worksOffline: boolean;\n}\n\nfunction AppBar(props: AppBarProps) {\n    return (\n        <>\n            <TopAppBar position=\"fixed\">\n                <Toolbar>\n                    <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\"\n                        style={{ marginRight: 16 }}\n                        onClick={() => props.setDrawerOpen(!props.drawerOpen)}>\n                        <MenuIcon />\n                    </IconButton>\n                    <div style={{ flexGrow: 1 }}>\n                        {props.title}\n                    </div>\n                    {props.updateReady && <UpdateReadyIcon />}\n                    {props.worksOffline && <WorksOfflineIcon />}\n                </Toolbar>\n            </TopAppBar>\n            <Toolbar />\n        </>\n    )\n}\nexport default AppBar;\n","import { Avatar, Button, Dialog, DialogActions, DialogContent, DialogTitle, List, ListItem, ListItemAvatar, ListItemText, Typography, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport GitInfo from 'react-git-info/macro';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { Centred } from '.';\n\nconst gitInfo = GitInfo();\n\ninterface ContribInfoProps {\n    name: string;\n    avatarUrl: string;\n    t: (key: string, props?: Object) => string;\n}\nfunction ContribInfo({ name, avatarUrl, t }: ContribInfoProps) {\n    return <ListItem\n        style={{\n            padding: \"8px 32px\"\n        }}\n        button\n        component=\"a\"\n        href={`https://github.com/Starwort/nookdata_v2/commits?author=${name}`}\n        target=\"_blank\"\n        title={t('core:info.contrib.tooltip', { name })}\n    >\n        <ListItemAvatar>\n            <Avatar alt={t('core:alt.avatar', { name })} src={avatarUrl} />\n        </ListItemAvatar>\n        <ListItemText primary={name} secondary={t(`core:info.contrib.${name.toLowerCase()}`)} />\n    </ListItem>;\n}\n\ninterface InfoDialogueProps {\n    open: boolean;\n    setOpen: (value: boolean) => void;\n}\n\nexport default function InfoDialogue(props: InfoDialogueProps) {\n    const { t } = useTranslation('core');\n    const theme = useTheme();\n    return <Dialog open={props.open} onClose={() => props.setOpen(false)}>\n        <DialogTitle>\n            {t('core:info.title')}\n        </DialogTitle>\n        <DialogContent>\n            <Trans i18nKey=\"core:info.description\" t={t}>\n                You are currently viewing NookData revision\n                <a href={`https://github.com/Starwort/nookdata_v2/commit/${gitInfo.commit.hash}`} style={{ color: theme.palette.primary.main, textUnderlineOffset: 2 }}>\n                    {{ gitRevision: gitInfo.commit.shortHash }}\n                </a>.\n            </Trans>\n            <br />\n            <br />\n            <Centred>\n                <Typography variant=\"subtitle1\">{t('core:info.contrib.title')}</Typography>\n            </Centred>\n            <Centred>\n                <Typography variant=\"subtitle2\">{t('core:info.contrib.subtitle')}</Typography>\n            </Centred>\n        </DialogContent>\n        <List>\n            <ContribInfo name=\"Starwort\" avatarUrl={\"https://avatars.githubusercontent.com/u/16487249\"} t={t} />\n            <ContribInfo name=\"EloLeChan\" avatarUrl={\"https://avatars.githubusercontent.com/u/83836335\"} t={t} />\n        </List>\n        <DialogActions>\n            <Button onClick={() => props.setOpen(false)}>\n                {t('core:ui.dismiss')}\n            </Button>\n        </DialogActions>\n    </Dialog>\n}","import { Dialog, DialogTitle, List, ListItem, ListItemText } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface LanguageDialogueProps {\n    open: boolean;\n    setLang: (lang: string) => void;\n}\n\nexport default function LanguageDialogue(props: LanguageDialogueProps) {\n    const { t } = useTranslation('core');\n    return <Dialog aria-labelledby=\"lang-dialogue-title\" open={props.open} PaperProps={{ style: { width: 250 } }}>\n        <DialogTitle style={{ textAlign: 'center' }} id=\"lang-dialogue-title\">{t('core:lang.choose')}</DialogTitle>\n        <List>\n            <ListItem style={{ textAlign: 'center' }} button onClick={() => props.setLang('en')}>\n                <ListItemText primary={t('core:lang.en')} />\n            </ListItem>\n            <ListItem style={{ textAlign: 'center' }} button onClick={() => props.setLang('fr')}>\n                <ListItemText primary={t('core:lang.fr')} />\n            </ListItem>\n        </List>\n    </Dialog>;\n}","import { List, ListItem, ListItemIcon, ListItemText, Typography, useMediaQuery, useTheme } from '@material-ui/core';\nimport { EmojiNature, Info, Language } from '@material-ui/icons';\nimport DarkModeIcon from '@material-ui/icons/Brightness4';\nimport LightModeIcon from '@material-ui/icons/Brightness7';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { AppBar, DrawerAdjust, ListItemLink, NavigationDrawer } from '.';\nimport { Dict } from '../misc';\nimport { ThemeName } from '../themes';\nimport InfoDialogue from './InfoDialogue';\nimport LanguageDialogue from './LanguageDialogue';\n\ninterface PageData {\n    title: string;\n    icon: React.ReactNode;\n}\nexport const pageData: Dict<PageData> = {\n    '/critterpedia': {\n        title: 'core:pages.critterpedia',\n        icon: <EmojiNature />,\n    },\n    // '/turnips': {\n    //     title: 'core:pages.turnips',\n    //     icon: <ShowChart />,\n    // },\n}\n\ninterface AppFrameProps {\n    setTheme: (value: ThemeName) => void;\n    children: React.ReactNode;\n    updateReady: boolean;\n    worksOffline: boolean;\n}\nlet initialRenders = 10;\nexport default function AppFrame(props: AppFrameProps) {\n    const theme = useTheme();\n    const startOpen = useMediaQuery(theme.breakpoints.up('lg'));\n    const [drawerOpen, setDrawerOpen] = React.useState(false);\n    if (initialRenders) {\n        console.log(initialRenders, startOpen)\n        if (startOpen && !drawerOpen) {\n            initialRenders = 0;\n            setDrawerOpen(true);\n        } else {\n            initialRenders--;\n        }\n    }\n    const { t, i18n } = useTranslation('core');\n    const [langOpen, setLangOpen] = React.useState(false);\n    const [infoOpen, setInfoOpen] = React.useState(false);\n    const newTheme: ThemeName = theme.name === 'dark' ? 'light' : 'dark';\n    return (\n        <>\n            <AppBar\n                setDrawerOpen={setDrawerOpen}\n                drawerOpen={drawerOpen}\n                title={\n                    <Typography variant=\"h6\">\n                        <div\n                            style={{\n                                color: theme.palette.winter.main,\n                                display: 'inline'\n                            }}\n                        >\n                            {t('title.a')}\n                        </div>\n                        <div\n                            style={{\n                                color: theme.palette.summer.main,\n                                display: 'inline'\n                            }}\n                        >\n                            {t('title.b')}\n                        </div>\n                    </Typography>\n                }\n                updateReady={props.updateReady}\n                worksOffline={props.worksOffline}\n            />\n            <NavigationDrawer open={drawerOpen} setOpen={setDrawerOpen}>\n                <List>\n                    {Object.entries(pageData).map(([route, data]) => (\n                        <ListItemLink to={route} icon={data.icon} primary={t(data.title)} />\n                    ))}\n                </List>\n                <div style={{ flexGrow: 1 }} />\n                <ListItem button onClick={() => setInfoOpen(true)}>\n                    <ListItemIcon>\n                        <Info />\n                    </ListItemIcon>\n                    <ListItemText primary={t('core:sidebar.about')} />\n                </ListItem>\n                <ListItem button onClick={() => setLangOpen(true)}>\n                    <ListItemIcon>\n                        <Language />\n                    </ListItemIcon>\n                    <ListItemText primary={t('core:sidebar.lang')} />\n                </ListItem>\n                <ListItem button onClick={() => props.setTheme(newTheme)}>\n                    <ListItemIcon>\n                        {\n                            newTheme === 'dark'\n                                ? <DarkModeIcon />\n                                : <LightModeIcon />\n                        }\n                    </ListItemIcon>\n                    <ListItemText primary={t('core:sidebar.theme')} />\n                </ListItem>\n            </NavigationDrawer>\n            <LanguageDialogue open={langOpen} setLang={(value: string) => {\n                i18n.changeLanguage(value);\n                setLangOpen(false);\n            }} />\n            <InfoDialogue open={infoOpen} setOpen={setInfoOpen} />\n            <DrawerAdjust active={drawerOpen}>\n                {props.children}\n            </DrawerAdjust>\n        </>\n    );\n}\n","import React from 'react';\nimport './Centred.scss';\ninterface CentredProps {\n    children: React.ReactNode;\n}\nexport default function Centred(props: CentredProps) {\n    return <div className=\"centred\">\n        {props.children}\n    </div>;\n}","import { useMediaQuery, useTheme } from '@material-ui/core';\nimport React from 'react';\n\ninterface DrawerAdjustProps {\n    active: boolean;\n    children: React.ReactNode;\n}\nexport default function DrawerAdjust(props: DrawerAdjustProps) {\n    const theme = useTheme();\n    const matches = useMediaQuery(theme.breakpoints.up('sm'));\n    return (\n        <div style={{ paddingLeft: 240 * (+props.active) * (+matches), transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms' }}>\n            {props.children}\n        </div>\n    );\n}\n","import { ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport React from 'react';\nimport { NavLink, NavLinkProps } from 'react-router-dom';\n\ninterface ListItemLinkProps {\n    icon?: React.ReactNode;\n    primary: string;\n    to: string;\n    exact?: boolean;\n}\nexport default function ListItemLink(props: ListItemLinkProps) {\n    const { icon, primary, to, exact } = props;\n    const renderLink = React.useMemo(\n        () => React.forwardRef<any, Omit<NavLinkProps, 'to'>>((itemProps, ref) => (\n            <NavLink to={to} ref={ref} {...itemProps} activeClassName=\"Mui-selected\" exact={exact} />\n        )),\n        [to]\n    );\n    return <ListItem button component={renderLink}>\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n        <ListItemText primary={primary} />\n    </ListItem>;\n}\n","import { useTheme } from '@material-ui/core';\nimport React from 'react';\nimport './Loading.scss';\nexport default function Loading() {\n    const theme = useTheme();\n    return <video autoPlay loop muted playsInline className={`loader ${theme.name}`}>\n        <source src=\"assets/shared/loading.gif.webm\" type=\"video/webm\" />\n        <source src=\"assets/shared/loading.gif.mp4\" type=\"video/mp4\" />\n    </video>;\n}","import { Drawer, Hidden, Toolbar, useTheme } from '@material-ui/core';\nimport React from 'react';\ninterface NavigationDrawerProps {\n    open: boolean;\n    setOpen: (value: boolean) => void;\n    children: React.ReactNode;\n}\n\n\nfunction NavigationDrawer(props: NavigationDrawerProps) {\n    const theme = useTheme();\n    const container = window !== undefined ? () => window.document.body : undefined;\n    return <>\n        <Hidden smUp>\n            <Drawer\n                variant=\"temporary\"\n                container={container}\n                anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n                open={props.open}\n                onClose={() => props.setOpen(false)}\n            >\n                {props.children}\n            </Drawer>\n        </Hidden>\n        <Hidden xsDown>\n            <Drawer\n                variant=\"persistent\"\n                anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n                open={props.open}\n            >\n                <Toolbar />\n                {props.children}\n            </Drawer>\n        </Hidden>\n    </>;\n}\nexport default NavigationDrawer;\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\ninterface UpdateReadyDialogueProps {\n    open: boolean;\n    setOpen: (value: boolean) => void;\n}\n\nexport default function UpdateReadyDialogue(props: UpdateReadyDialogueProps) {\n    const { t } = useTranslation(['service', 'core']);\n    return <Dialog open={props.open} onClose={() => props.setOpen(false)}>\n        <DialogTitle>{t('service:available_update.title')}</DialogTitle>\n        <DialogContent>\n            {t('service:available_update.content')}\n        </DialogContent>\n        <DialogActions>\n            <Button variant=\"text\" onClick={() => props.setOpen(false)}>{t('core:ui.dismiss')}</Button>\n        </DialogActions>\n    </Dialog>\n}","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\ninterface WorksOfflineDialogueProps {\n    open: boolean;\n    setOpen: (value: boolean) => void;\n}\n\nexport default function WorksOfflineDialogue(props: WorksOfflineDialogueProps) {\n    const { t } = useTranslation(['service', 'core']);\n    return <Dialog open={props.open} onClose={() => props.setOpen(false)}>\n        <DialogTitle>{t('service:available_offline.title')}</DialogTitle>\n        <DialogContent>\n            {t('service:available_offline.content')}\n        </DialogContent>\n        <DialogActions>\n            <Button variant=\"text\" onClick={() => props.setOpen(false)}>{t('core:ui.dismiss')}</Button>\n        </DialogActions>\n    </Dialog>\n}","import React, { useContext } from \"react\";\nimport UserSettings from \"./user_settings\";\n\n\ninterface INDContext {\n    time: Date;\n    settings: UserSettings;\n};\nconst defaultSettings: INDContext = {\n    time: new Date(),\n    settings: {\n        theme: 'dark',\n        hemisphere: 'north',\n        islandName: 'Gloverboia',\n        playerName: 'Starwort',\n        timeOffset: 0,\n        useSystemTime: true,\n        useTwelveHourTime: true,\n    }\n};\nlet interval: number | undefined;\nexport const NDContext = React.createContext<INDContext>(defaultSettings);\nexport class NDContextProvider extends React.PureComponent<{ interval?: number, settings: UserSettings, children: React.ReactNode }> {\n    static defaultProps = {\n        interval: 500,\n    };\n\n    interval: number;\n    children: React.ReactNode;\n\n    constructor({ interval, settings, children }: { interval?: number, settings: UserSettings, children: React.ReactNode }) {\n        super({ interval, settings, children });\n        this.interval = interval ? interval : NDContextProvider.defaultProps.interval;\n        this.children = children;\n        this.setState({\n            time: new Date(),\n            settings\n        });\n    }\n\n    // start with the current time in state\n    state = defaultSettings;\n\n    componentDidMount() {\n        // on mount, we set up a timer to update our cached time based on\n        // the interval prop.\n        interval = window.setInterval(this.updateTime, this.interval);\n    }\n\n    componentWillUnmount() {\n        // don't forget to clean up after ourselves!\n        if (interval) {\n            window.clearInterval(interval);\n        }\n    }\n\n    updateTime = () => {\n        this.setState(() => ({\n            time: new Date(),\n        }));\n    };\n\n    render() {\n        return React.createElement(\n            NDContext.Provider,\n            { value: this.state },\n            this.children,\n        )\n    }\n};\n\n// export function NDContextProvider({ time, settings, children }: INDContext & { children: React.ReactElement[] }) {\n//     const value = { time, settings };\n//     return React.createElement(\n//         NDContext.Provider,\n//         { value },\n//         children,\n//     )\n// }\nexport function useTime() {\n    const { time } = useContext(NDContext);\n    return time;\n}\nexport function useSettings() {\n    const { settings } = useContext(NDContext);\n    return settings;\n}\nexport function useNDContext() {\n    return useContext(NDContext);\n}\n","import { ThemeName } from \"./themes\";\n\ndeclare global {\n    interface String {\n        capitalise: () => String;\n    }\n    interface Array<T> {\n        rotated: (by: number) => Array<T>;\n        rotate: (by: number) => Array<T>;\n    }\n}\nString.prototype.capitalise = function () {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\nArray.prototype.rotated = function (by: number) {\n    by = by % this.length;\n    return this.slice(by, this.length).concat(this.slice(0, by));\n}\nArray.prototype.rotate = function (by: number) {\n    by = by % this.length;\n    while (this.length && by < 0) by += this.length;\n    this.push.apply(this, this.splice(0, by));\n    return this;\n}\n\ndeclare module \"react\" {\n    interface CSSProperties {\n        '--progress'?: string | number;\n    }\n}\n\ndeclare module \"@material-ui/core/styles/createMuiTheme\" {\n    interface Theme {\n        name: ThemeName;\n    }\n}\n\ndeclare module \"@material-ui/core/styles/createPalette\" {\n    interface ElevationColour {\n        0: { main: string };\n        1: { main: string };\n        2: { main: string };\n        3: { main: string };\n        4: { main: string };\n        6: { main: string };\n        8: { main: string };\n        12: { main: string };\n        16: { main: string };\n        24: { main: string };\n    }\n    interface PaletteColor {\n        transparent?: string;\n    }\n    interface SimplePaletteColorOptions {\n        transparent?: string;\n    }\n    interface Palette {\n        elevations: ElevationColour;\n        opacity: number;\n        modelled: Palette['primary'];\n        spring: Palette['primary'];\n        summer: Palette['primary'];\n        autumn: Palette['primary'];\n        winter: Palette['primary'];\n    }\n    interface PaletteOptions {\n        elevations: ElevationColour;\n        opacity: number;\n        modelled: PaletteOptions['primary'];\n        spring: PaletteOptions['primary'];\n        summer: PaletteOptions['primary'];\n        autumn: PaletteOptions['primary'];\n        winter: PaletteOptions['primary'];\n    }\n}\nexport { };\n","import { UserHourData, UserTurnipsData } from '../../data';\nimport { all, Filter, range, zip } from \"../../misc\";\nexport type { UserHourData, UserTurnipsData };\n\nexport enum Pattern {\n    FLUCTUATING,\n    LARGE_SPIKE,\n    DECREASING,\n    SMALL_SPIKE,\n    UNKNOWN,\n    AGGREGATE,\n}\n\ntype PatternDictionary = {\n    [K in Pattern]: number;\n};\n\nexport interface Range {\n    min: number;\n    max: number;\n    avg: number;\n}\n\nexport interface TurnipsResult {\n    pattern: Filter<Pattern, Pattern.UNKNOWN>;\n    chance: number;\n    hours: Range[];\n}\n\nfunction makeRange(min: number, max: number, base: number) {\n    let avg = (min + max) / 2 * base + 0.5;  // just trust me, this should be right\n    min = Math.ceil(min * base);\n    max = Math.ceil(max * base);\n    return { min, max, avg };\n}\n\nfunction rangeValid(range: Range, value: number | null) {\n    return (value === null) || (range.min <= value && value <= range.max);\n}\n\ninterface TurnipsIntermediateResult {\n    pattern: Filter<Pattern, Pattern.UNKNOWN>;\n    chance: number;\n    hours: number[][];\n}\n\ntype FlatData = (number | null)[];\n\nfunction intermediateToResult(result: TurnipsIntermediateResult): TurnipsResult {\n    return {\n        pattern: result.pattern,\n        chance: result.chance,\n        hours: result.hours.map(\n            (points) => (\n                {\n                    min: Math.min(...points),\n                    max: Math.max(...points),\n                    avg: points.reduce((a, b) => a + b, 0) / points.length,\n                }\n            )\n        )\n    };\n}\n\nfunction aggregate(results: TurnipsIntermediateResult[]): TurnipsIntermediateResult {\n    return {\n        pattern: results.reduce((pattern, result) => result.pattern != pattern ? Pattern.AGGREGATE : result.pattern, results[0].pattern),\n        chance: results.reduce((chance, pattern) => chance + pattern.chance, 0),\n        hours: results.reduce(\n            (hours: number[][], result): number[][] => hours.map(\n                (prices, index) => [...prices, ...result.hours[index]]\n            ),\n            [[], [], [], [], [], [], [], [], [], [], [], []]\n        ),\n    };\n}\n\nconst CHANCE_FLUCTUATING: PatternDictionary = {\n    [Pattern.FLUCTUATING]: 0.2,\n    [Pattern.LARGE_SPIKE]: 0.5,\n    [Pattern.DECREASING]: 0.25,\n    [Pattern.SMALL_SPIKE]: 0.45,\n    [Pattern.UNKNOWN]: 0.25,\n    [Pattern.AGGREGATE]: 0.25,\n};\n\nconst CHANCE_LARGE_SPIKE: PatternDictionary = {\n    [Pattern.FLUCTUATING]: 0.3,\n    [Pattern.LARGE_SPIKE]: 0.05,\n    [Pattern.DECREASING]: 0.45,\n    [Pattern.SMALL_SPIKE]: 0.25,\n    [Pattern.UNKNOWN]: 0.25,\n    [Pattern.AGGREGATE]: 0.25,\n};\n\nconst CHANCE_DECREASING: PatternDictionary = {\n    [Pattern.FLUCTUATING]: 0.15,\n    [Pattern.LARGE_SPIKE]: 0.2,\n    [Pattern.DECREASING]: 0.05,\n    [Pattern.SMALL_SPIKE]: 0.15,\n    [Pattern.UNKNOWN]: 0.25,\n    [Pattern.AGGREGATE]: 0.25,\n};\n\nconst CHANCE_SMALL_SPIKE: PatternDictionary = {\n    [Pattern.FLUCTUATING]: 0.35,\n    [Pattern.LARGE_SPIKE]: 0.25,\n    [Pattern.DECREASING]: 0.25,\n    [Pattern.SMALL_SPIKE]: 0.15,\n    [Pattern.UNKNOWN]: 0.25,\n    [Pattern.AGGREGATE]: 0.25,\n};\n\nfunction* calculateFluctuatingHigh(buy: number, data: FlatData, offset: number, length: number) {\n    let range = makeRange(0.9, 1.4, buy);\n    let prices = data.slice(offset, offset + length);\n    if (!all(prices.map((price) => (rangeValid(range, price))))) {\n        return;\n    }\n    yield prices.map((price) => (price ? { min: price, max: price, avg: price } : range));\n}\n\nfunction lowestRate(buy: number, price: number) {\n    return (price - 1) / buy;\n}\nfunction highestRate(buy: number, price: number) {\n    return price / buy;\n}\n\nfunction* calculateFluctuatingDec(buy: number, data: FlatData, offset: number, length: 2 | 3) {\n    let prices = data.slice(offset, offset + length);\n    let ranges: Range[] = [];\n    let minRates = [0.6];\n    let maxRates = [0.8];\n    let recalculate = false;\n    for (let i = 0; i < length; i++) {\n        let price = prices[i]\n        if (price) {\n            let minRate = lowestRate(buy, price);\n            let maxRate = highestRate(buy, price);\n            if (maxRate < minRates[i] || minRate > maxRates[i]) {\n                return;  // impossible pattern\n            }\n            ranges.push({ min: price, max: price, avg: price });\n            minRates[i] = minRate;\n            maxRates[i] = maxRate;\n            recalculate = true;  // need to ensure previous values make sense\n        } else {\n            ranges.push(makeRange(minRates[i], maxRates[i], buy));\n        }\n        minRates.push(minRates[i] - 0.1);\n        maxRates.push(maxRates[i] - 0.04);\n    }\n    if (recalculate) {\n        // make sure previous values make sense\n        for (let i = length - 2; i >= 0; i--) {\n            if (minRates[i] < minRates[i + 1]) {\n                minRates[i] = minRates[i + 1] + 0.04;  // increment it the smallest amount to be valid\n                ranges[i].min = Math.ceil(minRates[i] * buy);\n                ranges[i].avg = (minRates[i] + maxRates[i]) / 2 * buy;\n            }\n        }\n    }\n    yield ranges;\n}\n\nfunction* calculateOneFluctuating(categoryChance: number, buy: number, data: FlatData) {\n    // generator abuse!!!!\n    const chance = categoryChance / (\n        7 // hi1 and hi23\n        * 2 // dec1 and dec2\n    )\n    for (let hi1 = 0; hi1 <= 6; hi1++) {\n        const hi23 = 7 - hi1;\n        for (let phase1 of calculateFluctuatingHigh(buy, data, 1, hi1)) {\n            for (let _dec1 of [2, 3]) {\n                const dec1 = _dec1 as (2 | 3);\n                const dec2 = 5 - dec1 as (2 | 3);\n                for (let phase2 of calculateFluctuatingDec(buy, data, 1 + hi1, dec1)) {\n                    for (let hi3 = 0; hi3 < hi23; hi3++) {\n                        for (let phase3 of calculateFluctuatingHigh(buy, data, 1 + hi1 + dec1, hi23 - hi3)) {\n                            for (let phase4 of calculateFluctuatingDec(buy, data, 8 + dec1 - hi3, dec2)) {\n                                for (let phase5 of calculateFluctuatingHigh(buy, data, 13 - hi3, hi3)) {\n                                    yield {\n                                        pattern: Pattern.FLUCTUATING,\n                                        chance: chance / hi23,\n                                        hours: [{ min: buy, max: buy, avg: buy }, ...phase1, ...phase2, ...phase3, ...phase4, ...phase5]\n                                    };\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction calculateFluctuating(categoryChance: number, data: FlatData) {\n    if (data[0] !== null) {\n        return [...calculateOneFluctuating(categoryChance, data[0], data)];\n    }\n    return range(90, 111).map(i => [...calculateOneFluctuating(categoryChance / 20, i, data)]).flat();\n}\n\nfunction calculateOneLargeSpike(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction calculateLargeSpike(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction calculateOneDecreasing(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction calculateDecreasing(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction calculateOneSmallSpike(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction calculateSmallSpike(categoryChance: number, data: FlatData) {\n    //\n    return [];\n}\n\nfunction flattenData(data: UserTurnipsData): FlatData {\n    return [\n        data.buy,\n        data.mon.am,\n        data.mon.pm,\n        data.tue.am,\n        data.tue.pm,\n        data.wed.am,\n        data.wed.pm,\n        data.thu.am,\n        data.thu.pm,\n        data.fri.am,\n        data.fri.pm,\n        data.sat.am,\n        data.sat.pm,\n    ];\n}\nconst minPossibleData = [90, 36, 32, 27, 23, 18, 14, 9, 27, 23, 18, 14, 9];\nconst maxPossibleData = [110, 154, 154, 220, 660, 660, 660, 660, 660, 660, 660, 220, 219];\nexport function dataMakesSense(data: UserTurnipsData): boolean {\n    for (let [min, max, user] of zip(minPossibleData, maxPossibleData, flattenData(data))) {\n        if (user === null) {\n            continue;\n        }\n        if (user < min || user > max) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function calculate(data: UserTurnipsData): TurnipsResult[] {\n    if (!dataMakesSense(data)) {\n        return [];\n    }\n    let chanceFluctuating = CHANCE_FLUCTUATING[data.previousPattern];\n    let chanceLargeSpike = CHANCE_FLUCTUATING[data.previousPattern];\n    let chanceDecreasing = CHANCE_FLUCTUATING[data.previousPattern];\n    let chanceSmallSpike = CHANCE_FLUCTUATING[data.previousPattern];\n    let flatData = flattenData(data);\n    let result = [\n        ...calculateFluctuating(chanceFluctuating, flatData),\n        ...calculateLargeSpike(chanceLargeSpike, flatData),\n        ...calculateDecreasing(chanceDecreasing, flatData),\n        ...calculateSmallSpike(chanceSmallSpike, flatData),\n    ]\n    // result.push(aggregate(result));\n    return result;\n}\n\nexport const emptyWeek: UserTurnipsData = {\n    buy: null,\n    mon: { am: null, pm: null },\n    tue: { am: null, pm: null },\n    wed: { am: null, pm: null },\n    thu: { am: null, pm: null },\n    fri: { am: null, pm: null },\n    sat: { am: null, pm: null },\n    previousPattern: Pattern.UNKNOWN,\n    firstBuy: false,\n};\n\nexport const patternColours = {\n    [Pattern.AGGREGATE]: (chance: number) => `rgba(255, 255, 255, ${chance})`,\n    [Pattern.FLUCTUATING]: (chance: number) => `rgba(255, 0, 0, ${chance})`,\n    [Pattern.LARGE_SPIKE]: (chance: number) => `rgba(0, 255, 0, ${chance})`,\n    [Pattern.DECREASING]: (chance: number) => `rgba(0, 255, 255, ${chance})`,\n    [Pattern.SMALL_SPIKE]: (chance: number) => `rgba(127, 0, 255, ${chance})`,\n    [Pattern.UNKNOWN]: (chance: number) => { throw new Error('wtf') },\n}\n\n"],"sourceRoot":""}