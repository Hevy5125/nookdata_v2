(this.webpackJsonpnookdata_js=this.webpackJsonpnookdata_js||[]).push([[6],{250:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return xe}));var n=a(194),r=a(17),c=a(77),i=a(22),s=a(177),u=a(281),o=a(284),l=a(320),b=a(282),h=a(286),j=a(283),d=a(327),p=a(289),O=a(330),f=a(317),m=a(290),v=a(175),x=a(49),g=a(170),E=a(171),y=a(172),N=a(174),k=a(285),A=a(219),G=a(248),C=a.n(G),S=a(0),I=a.n(S),L=a(204),w=a(169),U=a(37),R=a(38),P=a(67),T=a(265),K=a(89),_=a(90),W=a(92),D=a(91),F=a(93),M=(a(249),a(250),a(2));var B=function(e){Object(D.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).chart=void 0,n.chartElement=void 0,n.chart=null,n.chartElement=null,n.exportChart=n.exportChart.bind(Object(W.a)(n)),n.destroyChart=n.destroyChart.bind(Object(W.a)(n)),n.loadData=n.loadData.bind(Object(W.a)(n)),n.redraw=n.redraw.bind(Object(W.a)(n)),n.setChart=n.setChart.bind(Object(W.a)(n)),n.setChartElementRef=n.setChartElementRef.bind(Object(W.a)(n)),n.unloadData=n.unloadData.bind(Object(W.a)(n)),n.updateConfig=n.updateConfig.bind(Object(W.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"shouldComponentUpdate",value:function(e){return!e.isPure||!function(e,t){var a=Object.keys(e),n=Object.keys(t),r=a.length;if(r!==n.length)return!1;for(var c=-1;++c<r;){var i=a[c];if(i!==n[c]||e[i]!==t[i])return!1}return!0}(this.props,e)}},{key:"componentDidUpdate",value:function(){this.updateChart()}},{key:"componentWillUnmount",value:function(){this.destroyChart()}},{key:"destroyChart",value:function(){this.chart&&this.chart.destroy(),this.chart=null}},{key:"exportChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!this.chart)return console.error("No chart is available to export.");this.chart.export({mimeType:e,preserveAspectRatio:!0},t)}},{key:"loadData",value:function(e){if(!this.chart)return console.error("No chart is available to which data can be loaded. It may already have been destroyed, or has never been drawn.");this.chart.load(e)}},{key:"redraw",value:function(){if(!this.chart)return console.error("No chart is available to draw.");this.chart.flush()}},{key:"setChart",value:function(e){if(this.chart)this.loadData(e);else{var t=this.props,a=(t.className,t.domProps,t.isPure,t.style,t.unloadBeforeLoad,Object(T.a)(t,["className","domProps","isPure","style","unloadBeforeLoad"]));this.chart=A.b.generate(Object(P.a)({bindto:this.chartElement},a))}}},{key:"setChartElementRef",value:function(e){this.chartElement=e}},{key:"unloadData",value:function(e){if(!this.chart)return console.error("No chart is available from which data can be unloaded. It may already have been destroyed, or has never been drawn.");this.chart.unload(e)}},{key:"updateChart",value:function(){var e=this.props,t=e.data,a=e.unloadBeforeLoad?Object(P.a)(Object(P.a)({},t),{},{unload:!0}):t;this.setChart(a)}},{key:"updateConfig",value:function(e,t,a){return this.chart?this.chart.config(e,t,a):console.error("You are trying to set the config a chart that does not exist.Have you passed `data`?")}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.domProps,n=e.style;return Object(M.jsx)("div",Object(P.a)(Object(P.a)({className:t,style:n},a),{},{ref:this.setChartElementRef}))}}]),a}(I.a.Component);B.displayName="Chart",B.getInstances=function(){return A.b.instance};var J,H,Y,q,z,Q,V=B,X=a(46),Z=a.n(X),$=a(263),ee=Z.a.mark(ie),te=Z.a.mark(oe),ae=Z.a.mark(le);function ne(e,t,a){var n=(e+t)/2*a+.5;return{min:e=Math.ceil(e*a),max:t=Math.ceil(t*a),avg:n}}function re(e,t){return null===t||e.min<=t&&t<=e.max}!function(e){e[e.FLUCTUATING=0]="FLUCTUATING",e[e.LARGE_SPIKE=1]="LARGE_SPIKE",e[e.DECREASING=2]="DECREASING",e[e.SMALL_SPIKE=3]="SMALL_SPIKE",e[e.UNKNOWN=4]="UNKNOWN",e[e.AGGREGATE=5]="AGGREGATE"}(Q||(Q={}));var ce=(J={},Object(c.a)(J,Q.FLUCTUATING,.2),Object(c.a)(J,Q.LARGE_SPIKE,.5),Object(c.a)(J,Q.DECREASING,.25),Object(c.a)(J,Q.SMALL_SPIKE,.45),Object(c.a)(J,Q.UNKNOWN,.25),Object(c.a)(J,Q.AGGREGATE,.25),J);H={},Object(c.a)(H,Q.FLUCTUATING,.3),Object(c.a)(H,Q.LARGE_SPIKE,.05),Object(c.a)(H,Q.DECREASING,.45),Object(c.a)(H,Q.SMALL_SPIKE,.25),Object(c.a)(H,Q.UNKNOWN,.25),Object(c.a)(H,Q.AGGREGATE,.25),Y={},Object(c.a)(Y,Q.FLUCTUATING,.15),Object(c.a)(Y,Q.LARGE_SPIKE,.2),Object(c.a)(Y,Q.DECREASING,.05),Object(c.a)(Y,Q.SMALL_SPIKE,.15),Object(c.a)(Y,Q.UNKNOWN,.25),Object(c.a)(Y,Q.AGGREGATE,.25),q={},Object(c.a)(q,Q.FLUCTUATING,.35),Object(c.a)(q,Q.LARGE_SPIKE,.25),Object(c.a)(q,Q.DECREASING,.25),Object(c.a)(q,Q.SMALL_SPIKE,.15),Object(c.a)(q,Q.UNKNOWN,.25),Object(c.a)(q,Q.AGGREGATE,.25);function ie(e,t,a,n){var r,c;return Z.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=ne(.9,1.4,e),c=t.slice(a,a+n),Object(R.a)(c.map((function(e){return re(r,e)})))){i.next=4;break}return i.abrupt("return");case 4:return i.next=6,c.map((function(e){return e?{min:e,max:e,avg:e}:r}));case 6:case"end":return i.stop()}}),ee)}function se(e,t){return(t-1)/e}function ue(e,t){return t/e}function oe(e,t,a,n){var r,c,i,s,u,o,l,b,h,j;return Z.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:r=t.slice(a,a+n),c=[],i=[.6],s=[.8],u=!1,o=0;case 6:if(!(o<n)){d.next=25;break}if(!(l=r[o])){d.next=19;break}if(b=se(e,l),!((h=ue(e,l))<i[o]||b>s[o])){d.next=13;break}return d.abrupt("return");case 13:c.push({min:l,max:l,avg:l}),i[o]=b,s[o]=h,u=!0,d.next=20;break;case 19:c.push(ne(i[o],s[o],e));case 20:i.push(i[o]-.1),s.push(s[o]-.04);case 22:o++,d.next=6;break;case 25:if(u)for(j=n-2;j>=0;j--)i[j]<i[j+1]&&(i[j]=i[j+1]+.04,c[j].min=Math.ceil(i[j]*e),c[j].avg=(i[j]+s[j])/2*e);return d.next=28,c;case 28:case"end":return d.stop()}}),te)}function le(e,t,a){var r,c,i,s,u,o,l,b,h,j,d,p,O,f,m,v,x,g,E,y,N,k,A,G;return Z.a.wrap((function(C){for(;;)switch(C.prev=C.next){case 0:r=e/14,c=0;case 2:if(!(c<=6)){C.next=97;break}i=7-c,s=Object(n.a)(ie(t,a,1,c)),C.prev=5,s.s();case 7:if((u=s.n()).done){C.next=86;break}o=u.value,l=0,b=[2,3];case 10:if(!(l<b.length)){C.next=84;break}h=b[l],d=5-(j=h),p=Object(n.a)(oe(t,a,1+c,j)),C.prev=15,p.s();case 17:if((O=p.n()).done){C.next=73;break}f=O.value,m=0;case 20:if(!(m<i)){C.next=71;break}v=Object(n.a)(ie(t,a,1+c+j,i-m)),C.prev=22,v.s();case 24:if((x=v.n()).done){C.next=60;break}g=x.value,E=Object(n.a)(oe(t,a,8+j-m,d)),C.prev=27,E.s();case 29:if((y=E.n()).done){C.next=50;break}N=y.value,k=Object(n.a)(ie(t,a,13-m,m)),C.prev=32,k.s();case 34:if((A=k.n()).done){C.next=40;break}return G=A.value,C.next=38,{pattern:Q.FLUCTUATING,chance:r/i,hours:[{min:t,max:t,avg:t}].concat(Object($.a)(o),Object($.a)(f),Object($.a)(g),Object($.a)(N),Object($.a)(G))};case 38:C.next=34;break;case 40:C.next=45;break;case 42:C.prev=42,C.t0=C.catch(32),k.e(C.t0);case 45:return C.prev=45,k.f(),C.finish(45);case 48:C.next=29;break;case 50:C.next=55;break;case 52:C.prev=52,C.t1=C.catch(27),E.e(C.t1);case 55:return C.prev=55,E.f(),C.finish(55);case 58:C.next=24;break;case 60:C.next=65;break;case 62:C.prev=62,C.t2=C.catch(22),v.e(C.t2);case 65:return C.prev=65,v.f(),C.finish(65);case 68:m++,C.next=20;break;case 71:C.next=17;break;case 73:C.next=78;break;case 75:C.prev=75,C.t3=C.catch(15),p.e(C.t3);case 78:return C.prev=78,p.f(),C.finish(78);case 81:l++,C.next=10;break;case 84:C.next=7;break;case 86:C.next=91;break;case 88:C.prev=88,C.t4=C.catch(5),s.e(C.t4);case 91:return C.prev=91,s.f(),C.finish(91);case 94:c++,C.next=2;break;case 97:case"end":return C.stop()}}),ae,null,[[5,88,91,94],[15,75,78,81],[22,62,65,68],[27,52,55,58],[32,42,45,48]])}function be(e){return[e.buy,e.mon.am,e.mon.pm,e.tue.am,e.tue.pm,e.wed.am,e.wed.pm,e.thu.am,e.thu.pm,e.fri.am,e.fri.pm,e.sat.am,e.sat.pm]}var he=[90,36,32,27,23,18,14,9,27,23,18,14,9],je=[110,154,154,220,660,660,660,660,660,660,660,220,219];function de(e){var t,a=Object(n.a)(Object(R.i)(he,je,be(e)));try{for(a.s();!(t=a.n()).done;){var c=Object(r.a)(t.value,3),i=c[0],s=c[1],u=c[2];if(null!==u&&(u<i||u>s))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}function pe(e){if(!de(e))return[];var t=ce[e.previousPattern],a=(e.previousPattern,e.previousPattern,e.previousPattern,be(e));return[].concat(Object($.a)(function(e,t){return null!==t[0]?Object($.a)(le(e,t[0],t)):Object(R.f)(90,111).map((function(a){return Object($.a)(le(e/20,a,t))})).flat()}(t,a)),Object($.a)([]),Object($.a)([]),Object($.a)([]))}var Oe,fe={buy:null,mon:{am:null,pm:null},tue:{am:null,pm:null},wed:{am:null,pm:null},thu:{am:null,pm:null},fri:{am:null,pm:null},sat:{am:null,pm:null},previousPattern:Q.UNKNOWN,firstBuy:!1},me=(z={},Object(c.a)(z,Q.AGGREGATE,(function(e){return"rgba(255, 255, 255, ".concat(e,")")})),Object(c.a)(z,Q.FLUCTUATING,(function(e){return"rgba(255, 0, 0, ".concat(e,")")})),Object(c.a)(z,Q.LARGE_SPIKE,(function(e){return"rgba(0, 255, 0, ".concat(e,")")})),Object(c.a)(z,Q.DECREASING,(function(e){return"rgba(0, 255, 255, ".concat(e,")")})),Object(c.a)(z,Q.SMALL_SPIKE,(function(e){return"rgba(127, 0, 255, ".concat(e,")")})),Object(c.a)(z,Q.UNKNOWN,(function(e){throw new Error("wtf")})),z),ve=["mon","tue","wed","thu","fri","sat"];Oe={},Object(c.a)(Oe,Q.FLUCTUATING,"turnips:pattern.fluctuating"),Object(c.a)(Oe,Q.LARGE_SPIKE,"turnips:pattern.large_spike"),Object(c.a)(Oe,Q.DECREASING,"turnips:pattern.decreasing"),Object(c.a)(Oe,Q.SMALL_SPIKE,"turnips:pattern.small_spike"),Object(c.a)(Oe,Q.AGGREGATE,"turnips:pattern.aggregate");function xe(){var e=Object(R.d)(window.localStorage.turnips,Object(R.c)(fe)),t=I.a.useState(e),a=Object(r.a)(t,2),G=a[0],S=a[1],P=I.a.useState(!1),T=Object(r.a)(P,2),K=T[0],_=T[1],W=I.a.useState(!1),D=Object(r.a)(W,2),F=D[0],B=D[1],J=de(G),H=J?(console.log("calculating"),pe(G)):[];console.log(H.length&&"hello");var Y,q=[],z={},X={},Z=0,$=Object(n.a)(H);try{for($.s();!(Y=$.n()).done;){var ee,te=Y.value,ae=["data".concat(Z)],ne=Object(n.a)(te.hours);try{for(ne.s();!(ee=ne.n()).done;){var re=ee.value;ae.push({low:re.min,high:re.max,mid:re.avg})}}catch(be){ne.e(be)}finally{ne.f()}q.push(ae),X["data".concat(Z)]=X[te.pattern],z["data".concat(Z++)]=me[te.pattern](te.chance)}}catch(be){$.e(be)}finally{$.f()}function ce(e){var t=C()(G,e);window.localStorage.turnips=JSON.stringify(t),S(t)}function ie(){var e=Object(R.c)(fe);e.previousPattern=H.map((function(e){return e.pattern})).reduce((function(e,t){return e===Q.UNKNOWN?Q.UNKNOWN:e===Q.AGGREGATE?t:t===Q.AGGREGATE?e:e!==t?Q.UNKNOWN:t}),Q.UNKNOWN),ce(e)}console.log(H);var se=Object(w.a)(["core","turnips"]).t,ue=Object(i.a)(),oe=!Object(s.a)(ue.breakpoints.up("sm")),le=Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(U.c,{children:Object(M.jsx)(o.a,{control:Object(M.jsx)(l.a,{checked:G.firstBuy,onChange:function(e){return ce({firstBuy:e.target.checked})},color:"primary"}),label:se("turnips:prices.first_buy.checkbox"),title:se("turnips:prices.first_buy.hover")})})});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(L.a,{children:Object(M.jsx)("title",{children:se("core:title.browser.page",{pageTitle:se("core:pages.turnips")})})}),Object(M.jsxs)("div",{style:{maxWidth:800,margin:"auto"},children:[Object(M.jsxs)(b.a,{style:{margin:16},children:[Object(M.jsx)(h.a,{title:se("turnips:prices.title")}),Object(M.jsxs)(j.a,{children:[Object(M.jsxs)(u.a,{container:!0,spacing:1,children:[oe&&le,Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(d.a,{type:"number",fullWidth:!0,value:G.buy,onChange:function(e){return ce({buy:e.target.value?+e.target.value:null})},label:se("turnips:prices.buy")})}),!oe&&le,ve.map((function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(d.a,{type:"number",fullWidth:!0,value:G[e].am,onChange:function(t){return ce(Object(c.a)({},e,{am:t.target.value?+t.target.value:null}))},label:se("turnips:prices.am",{day:se("core:time.weekday.".concat(e,".long"))})})}),Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(d.a,{type:"number",fullWidth:!0,value:G[e].pm,onChange:function(t){return ce(Object(c.a)({},e,{pm:t.target.value?+t.target.value:null}))},label:se("turnips:prices.pm",{day:se("core:time.weekday.".concat(e,".long"))})})})]})})),Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsxs)(p.a,{fullWidth:!0,children:[Object(M.jsx)(O.a,{id:"comp-label",children:se("turnips:pattern.label")}),Object(M.jsxs)(f.a,{value:G.previousPattern,onChange:function(e){return ce({previousPattern:e.target.value})},labelId:"pattern-label",fullWidth:!0,children:[Object(M.jsx)(m.a,{value:Q.SMALL_SPIKE,children:se("turnips:pattern.small_spike")}),Object(M.jsx)(m.a,{value:Q.LARGE_SPIKE,children:se("turnips:pattern.large_spike")}),Object(M.jsx)(m.a,{value:Q.FLUCTUATING,children:se("turnips:pattern.fluctuating")}),Object(M.jsx)(m.a,{value:Q.DECREASING,children:se("turnips:pattern.decreasing")}),Object(M.jsx)(m.a,{value:Q.UNKNOWN,children:se("turnips:pattern.unknown")})]})]})}),Object(M.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(v.a,{style:{height:"100%"},fullWidth:!0,variant:"contained",color:"primary",onClick:function(){Object(R.d)(window.localStorage.turnipDontConfirm,!1)?ie():_(!0)},children:se("turnips:ui.start_next")})})]}),J||Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("br",{}),Object(M.jsxs)(U.c,{children:[Object(M.jsx)("div",{style:{display:"inline-flex",justifyContent:"center",height:"100%",color:ue.palette.error.main,paddingRight:8},children:Object(M.jsx)(k.a,{})}),Object(M.jsx)(x.a,{color:"error",children:se("turnips:ui.bad_data")})]})]})]})]}),!!H.length&&Object(M.jsx)(b.a,{style:{margin:16},children:Object(M.jsx)(j.a,{children:Object(M.jsx)(V,{isPure:!0,className:"chart ".concat(ue.name),data:{columns:q,colors:z,names:X,type:Object(A.a)()},legend:{show:!1}})})})]}),Object(M.jsxs)(g.a,{open:K,children:[Object(M.jsx)(E.a,{children:se("turnips:ui.reset_dialogue.title")}),Object(M.jsxs)(y.a,{children:[se("turnips:ui.reset_dialogue.text"),Object(M.jsx)("br",{}),Object(M.jsx)(o.a,{control:Object(M.jsx)(l.a,{checked:F,onChange:function(e){return B(e.target.checked)},color:"primary"}),label:se("core:ui.dont_ask")})]}),Object(M.jsxs)(N.a,{children:[Object(M.jsx)(v.a,{onClick:function(){return _(!1)},children:se("core:ui.cancel")}),Object(M.jsx)(v.a,{onClick:function(){F&&(window.localStorage.turnipDontConfirm="true"),_(!1),ie()},children:se("core:ui.confirm")})]})]})]})}}}]);
//# sourceMappingURL=6.be09e80d.chunk.js.map